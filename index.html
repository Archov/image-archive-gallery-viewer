<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archive Image Gallery</title>
        <link rel="stylesheet" href="./src/renderer/styles/base.css">
    <link rel="stylesheet" href="./src/renderer/styles/gallery.css">
    <link rel="stylesheet" href="./src/renderer/styles/history.css">
    <link rel="stylesheet" href="./src/renderer/styles/settings.css">
    <link rel="stylesheet" href="./src/renderer/styles/loading.css">
</head>
<body>
    <div class="app-header">
        <button class="history-btn" id="historyBtn">Library</button>
        <button class="settings-btn" id="settingsBtn">Settings</button>
        <input type="text" class="url-input" placeholder="Paste archive URL here or drag & drop files/links..." id="urlInput">
        <button class="load-btn" id="loadBtn">Load Archive</button>
        <div class="status" id="status">Ready</div>
    </div>

    <div class="main-content">
        <div class="welcome" id="welcome">
            <h1>ðŸ“¦ Archive Image Gallery</h1>
            <p>Paste any ZIP, RAR, or 7Z archive URL above to view images in a gallery format. Supports column controls, hover zoom, arrow keys, and scroll wheel navigation in fullscreen mode.</p>
            <p style="margin-top: 20px; color: #888; font-size: 14px;">
                You can also drag and drop archive files or URLs directly onto this window.
            </p>
        </div>

        <div class="gallery-container" id="galleryContainer">
            <div class="gallery-controls">
                <span class="archive-title" id="archiveTitle"></span>
                <label>Columns:</label>
                <input type="range" id="columnSlider" min="2" max="8" value="5">
                <span id="columnValue">5</span>
                
                <label>Hover Zoom:</label>
                <input type="range" id="zoomSlider" min="100" max="200" value="100">
                <span id="zoomValue">100%</span>
                
                <button class="load-btn" id="newArchiveBtn" style="margin-left: auto;">New Archive</button>
            </div>
            <div class="gallery-grid" id="galleryGrid"></div>
        </div>
    </div>

    <!-- History Panel -->
    <div class="history-panel" id="historyPanel">
        <div class="history-header">
            <h3 style="margin: 0; color: #e0e0e0;">Library</h3>
            <button class="load-btn" id="clearHistoryBtn" style="font-size: 12px; padding: 4px 8px;">Clear All</button>
        </div>
        <div class="history-controls">
            <button id="selectAllBtn">Select All</button>
            <button id="selectNoneBtn">Select None</button>
            <button id="clearSelectedBtn" disabled>Clear Selected</button>
        </div>
        <div class="history-list" id="historyList">
            <!-- History items will be populated here -->
        </div>
    </div>

    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <h3 style="margin: 0; color: #e0e0e0;">Settings</h3>
            <span style="font-size: 12px; color: #888;">v1.0</span>
        </div>
        
        <div class="settings-group">
            <h3>Library Management</h3>
            
            <div class="setting-item">
                <label for="librarySize">Library Size Limit (GB)</label>
                <input type="number" id="librarySize" min="0.5" max="50" step="0.5" value="2">
            </div>
            
            <div class="library-info" id="libraryInfo">
                <div><span>Used:</span><span id="libraryUsed">0 MB</span></div>
                <div><span>Available:</span><span id="libraryAvailable">2.0 GB</span></div>
                <div><span>Starred Items:</span><span id="starredCount">0</span> <small style="color: #888;">(excluded from cleanup)</small></div>
                <div class="library-bar">
                    <div class="library-bar-fill" id="libraryBarFill" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="setting-item" style="margin-top: 15px;">
                <button class="load-btn" id="clearLibraryBtn" style="width: 100%;">Clear Non-Starred Library</button>
            </div>
        </div>

        <div class="settings-group">
            <h3>General</h3>
            
            <div class="setting-item">
                <label for="autoLoadFromClipboard">Auto-load from clipboard</label>
                <select id="autoLoadFromClipboard">
                    <option value="true">Enabled</option>
                    <option value="false">Disabled</option>
                </select>
            </div>
            
            <div class="setting-item">
                <label for="maxHistoryItems">Max history items</label>
                <input type="number" id="maxHistoryItems" min="10" max="1000" value="100">
            </div>

            <div class="setting-item">
                <label for="allowFullscreenUpscaling">Allow fullscreen upscaling</label>
                <select id="allowFullscreenUpscaling">
                    <option value="false">Disabled (max 100%)</option>
                    <option value="true">Enabled (scale to fit screen)</option>
                </select>
            </div>

            <div class="setting-item">
                <label for="autoLoadAdjacentArchives">Auto-load adjacent archives</label>
                <select id="autoLoadAdjacentArchives">
                    <option value="true">Enabled</option>
                    <option value="false">Disabled</option>
                </select>
            </div>

            <div class="setting-section">
                <h4>ðŸ’¾ Database Management</h4>

                <div class="setting-item">
                    <button id="backupDatabaseBtn" class="backup-btn">Create Manual Backup</button>
                    <span id="backupStatus"></span>
                </div>

                <div class="setting-item">
                    <button id="listBackupsBtn" class="backup-btn">View Available Backups</button>
                </div>

                <div id="backupList" class="backup-list" style="display: none;">
                    <h5>Available Backups:</h5>
                    <div id="backupItems"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loading">
        <div class="loading-window">
            <h3 id="loadingTitle">Loading</h3>
            <p id="loadingText">Please wait...</p>
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-percent" id="progressText">0%</div>
            </div>
        </div>
    </div>

    <div class="fullscreen-overlay" id="fullscreenOverlay">
        <div class="fullscreen-container">
            <img class="fullscreen-image" id="fullscreenImage">
            <button class="fullscreen-nav fullscreen-prev" id="fullscreenPrev">â€¹</button>
            <button class="fullscreen-nav fullscreen-next" id="fullscreenNext">â€º</button>
            <button class="fullscreen-close" id="fullscreenClose">âœ•</button>
            <div class="fullscreen-counter" id="fullscreenCounter"></div>
        </div>
    </div>

    <div class="archive-loading" id="archiveLoading">
        <h4>Loading Archive...</h4>
        <p>Please wait while we extract the images</p>
    </div>

    <script type="module" src="./src/renderer/app.js"></script>
</body>
</html>



